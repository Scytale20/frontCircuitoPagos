<div class="container mt-4">
  
<!-- Modal nuevo proveedor -->

  <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal"
    data-bs-whatever="@getbootstrap">
    Nuevo
  </button>
  
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" (show.bs.modal)="nuevoProveedorModal()">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header header text-center mb-2">
          <h1 class="modal-title fs-2 w-100 text-muted" id="exampleModalLabel">
          </h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body mt-3 mb-3 p-5">
          <form [formGroup]="nuevoProveedorForm">           
  
            <div class="ps-1 pe-1">
  
              <div class="mb-2">
                <label for="codigo" class="form-label text-muted">Codigo:</label>
                <input type="number" class="form-control" id="codigo" formControlName="codigo" readonly>
              </div>

              <div class="mb-2">
                <label for="proveedor" class="form-label text-muted">Razon Social:</label>
                <input type="text" class="form-control" id="proveedor" formControlName="proveedor" [ngClass]="{
                  'is-invalid': proveedorField.errors && proveedorField.touched,
                  'is-valid': !proveedorField.errors && proveedorField.touched
                }"/>

                @if(proveedorField.hasError('required')){
                  <p class="invalid-feedback">
                    Ingrese Razon Social
                  </p>
                }
              </div>

              <div class="mb-2">
                <label for="cuit" class="form-label text-muted">CUIT:</label>
                <input type="text" class="form-control" id="cuit" formControlName="cuit" [ngClass]="{
                  'is-invalid': cuitField.errors && cuitField.touched,
                  'is-valid': !cuitField.errors && cuitField.touched
                }"/>

              @if(cuitField.hasError('required')){                
                  <p class="invalid-feedback">
                    Campo requerido
                  </p>
                }@else if(cuitField.hasError('minlength') || cuitField.hasError('maxlength')) {
                  <p class="invalid-feedback">
                    Debe contener 11 caracteres
                  </p>
                }
              </div>
              
  
              <div class="mb-4">
                <label for="domicilio" class="col-form-label text-muted">Domicilio:</label>
                <input type="text" class="form-control" id="domicilio" formControlName="domicilio" [ngClass]="{
                  'is-invalid': domicilioField.errors && domicilioField.touched,
                  'is-valid': !domicilioField.errors && domicilioField.touched
                }"/>

                @if(proveedorField.hasError('required')){
                  <p class="invalid-feedback">
                    Ingrese Domicilio
                  </p>
                }
              </div>
  
              <div class="">
                <label for="condicionIva" class="col-form-label text-muted">Selecciona una opci贸n:</label>
                <select class="form-select" id="condicionIva" formControlName="condicionIva" [ngClass]="{
                  'is-invalid': condicionIvaField.errors && condicionIvaField.touched,
                  'is-valid': !condicionIvaField.errors && condicionIvaField.touched
                }">
                  <option selected disabled value="" class="text-muted">Condicion IVA</option>
                  <option value="Responsable Inscripto">Responsable Inscripto</option>
                  <option value="Responsable no Inscripto">Responsable no Inscripto</option>
                  <option value="No Responsable">No Responsable</option>
                  <option value="Sujeto Exento">Sujeto Exento</option>
                  <option value="Consumidor Final">Consumidor Final</option>
                  <option value="Responsable Monotributo">Responsable Monotributo</option>
                  <option value="Sujeto no Categorizado">Sujeto no Categorizado</option>
                  <option value="Monotributista Social">Monotributista Social</option>
                </select>

                @if(condicionIvaField.hasError('required')){
                  <p class="invalid-feedback">
                    Selecciona una opcion
                  </p>
                }

              </div>
  
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <div class="mb-1 d-flex justify-content-end gap-4 mb-4">
            <button class="btn btn-outline-primary" (click)="onClickProveedor()">
              Registrar
            </button>            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Cierra Modal-->


<div class="contenedor-tabla container mt-4 p-4 border rounded">
    <table datatable [dtOptions]="dtoptions" [dtTrigger]="dtTrigger" class="table table-striped border">
        <thead class="table-dark">
          <tr>
            
            <th>C贸digo</th>
            <th>Raz贸n Social</th>
            <th>CUIT</th>
            <th>Domicilio</th>
            <th>Condici贸n IVA</th>
          </tr>
        </thead>
        <tbody>
    
            @for(proveedor of proveedores; track proveedor.id){
              <tr>
                
                <td>{{ proveedor.codigo }}</td>
                <td>{{ proveedor.razonSocial }}</td>
                <td>{{ proveedor.cuit }}</td>
                <td>{{ proveedor.domicilio }}</td>
                <td>{{ proveedor.condicionIva }}</td>
              </tr>
           } 
    
            </tbody>
        
      </table>
    
</div>